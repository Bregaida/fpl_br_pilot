# HTTP
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

# OpenAPI / Swagger UI
quarkus.smallrye-openapi.path=/q/openapi
quarkus.swagger-ui.always-include=true

# CORS Configuration - Desabilitado para usar CorsFilter customizado
quarkus.http.cors=false


# PostgreSQL
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:5432/fpl}
quarkus.datasource.username=${DB_USER:app}
quarkus.datasource.password=${DB_PASS:app}

# Pool de conexões otimizado
quarkus.datasource.jdbc.max-size=20
quarkus.datasource.jdbc.min-size=5
quarkus.datasource.jdbc.initial-size=5
quarkus.datasource.jdbc.validation-query-sql=SELECT 1
quarkus.datasource.jdbc.background-validation=true
quarkus.datasource.jdbc.background-validation-millis=30000
quarkus.datasource.jdbc.leak-detection-interval=60000
quarkus.datasource.jdbc.idle-removal-interval=300000
quarkus.datasource.jdbc.max-lifetime=1800000

# Hibernate ORM
quarkus.hibernate-orm.database.generation=validate
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file
quarkus.hibernate-orm.physical-naming-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
quarkus.hibernate-orm.implicit-naming-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyComponentPathImpl

# Hibernate schema generation por perfil
%dev.quarkus.hibernate-orm.database.generation=update

# JWT (dev defaults - use env secrets in prod)
# Using HMAC HS256 for local dev to avoid key files
quarkus.smallrye-jwt.enabled=false
# smallrye.jwt.sign.key=${JWT_SIGN_KEY:dev-sign-secret-change-me}
# smallrye.jwt.verify.key=${JWT_VERIFY_KEY:dev-sign-secret-change-me}
# smallrye.jwt.algorithm=HS256


# MicroProfile REST Client Configuration
br.com.fplbr.pilot.aisweb.application.client.AiswebClient/mp-rest/url=${aisweb.api.url}
br.com.fplbr.pilot.aisweb.application.client.AiswebClient/mp-rest/scope=jakarta.inject.Singleton

# Mailer (produção - Gmail SMTP)
quarkus.mailer.from=fplbr.aerobatic@gmail.com
quarkus.mailer.host=smtp.gmail.com
quarkus.mailer.port=587
quarkus.mailer.username=${SMTP_USER:fplbr.aerobatic@gmail.com}
quarkus.mailer.password=${SMTP_PASS:changeme}
quarkus.mailer.start-tls=REQUIRED
quarkus.mailer.ssl=false
quarkus.mailer.mock=false



# Security secrets (env) - dev defaults; em produção definir via env
app.security.password.pepper=${APP_SECURITY_PASSWORD_PEPPER:dev-pepper}
app.security.totp.crypto.key=${APP_SECURITY_TOTP_CRYPTO_KEY:dev-totp-crypto-key-1234}
quarkus.arc.dev-mode.monitoring-enabled=true
quarkus.configuration.build-time-mismatch-at-runtime=fail

# Flyway Database Migration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=0

# Hibernate - Usar Flyway para migrações
# quarkus.hibernate-orm.database.generation=none
# quarkus.hibernate-orm.sql-load-script=no-file

# AISWEB Configuration
aisweb.base-url=https://api.decea.mil.br/aisweb/

# Rest Client Configuration
quarkus.rest-client."br.com.fplbr.pilot.aisweb.application.client.AiswebClient".url=https://aisweb.decea.mil.br
quarkus.rest-client."br.com.fplbr.pilot.aisweb.application.client.AiswebClient".connect-timeout=5000
quarkus.rest-client."br.com.fplbr.pilot.aisweb.application.client.AiswebClient".read-timeout=15000

# Enable JSON-B for REST Client
quarkus.rest-client.jsonb.enable=true

# Logging for REST Client (for debugging)
quarkus.log.category."org.jboss.resteasy.client".level=DEBUG
quarkus.log.category."org.jboss.resteasy.client.jaxrs".level=DEBUG

# Logging for AISWEB Service (to see our detailed logs)
quarkus.log.category."br.com.fplbr.pilot.aisweb.application.service.AiswebFullService".level=INFO
quarkus.log.level=INFO

# Desabilitar módulos problemáticos temporariamente
quarkus.arc.exclude-types=br.com.fplbr.pilot.auth.**

# Redis Configuration
quarkus.redis.hosts=redis://localhost:6379
quarkus.redis.timeout=10s

# Aerodromo Queue Configuration
aerodromo.queue.batch.size=50
aerodromo.queue.processing.interval=5s
